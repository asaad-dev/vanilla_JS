<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
        <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
        <!-- la ligne suivante vient de getbootstrap et comporte une valeur supplémentaire "shrink-to-fit=no" cela concerne les mobiles -->
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>JS - VIII 04 - Formulaire</title>
        <link rel="icon" href="../img/js.png">
        <!-- CSS de Bootstrap -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">        

        <!-- <link rel="stylesheet" href="../css/style.css"> -->

         <!-- style -->
         <style>
             .error {
                 border: 1px solid red;
             }

             .valide {
                 border: 1px solid green;
             }
         </style>

</head>
<body>
    <nav class="navbar navbar-expand-md navbar-dark bg-dark">
        <a class="navbar-brand" href="#">Cours JS</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExample04" aria-controls="navbarsExample04" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
      
        <div class="collapse navbar-collapse" id="navbarsExample04">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item">
                <a class="nav-link" href="../06-selecteurs/06-01-selecteurs.html">06 Sélecteurs</a>
            </li>
            <li>
                <a class="nav-link" href="../07-evenements/07-01-evenements.html">07 Evenements</a>
            </li>

            <li class="nav-item active">
              <a class="nav-link" href="08-04-formulaire.html">08 Formulaire</a>
            </li>
            
            <li class="nav-item">
              <a class="nav-link" href="../09-dom/09-01-dom.html">09 Le DOM</a>
            </li>

            <li class="nav-item">
                <a class="nav-link active" href="08-04-formulaire.html">Formulaire</a>
            </li>

            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="dropdown04" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">08 Manipulation</a>
              <div class="dropdown-menu" aria-labelledby="dropdown04">
                <a class="dropdown-item" href="08-01-diaporama.html">Diaporama</a>
                <a class="dropdown-item" href="08-02-setInterval.html">SetInterval</a>
                <a class="dropdown-item" href="08-03-keydwon.html">Keydown</a>
                <a class="dropdown-item" href="08-04-formulaire.html">Formulaire</a>
                <a class="dropdown-item" href="08-05-toggle.html">Toggle</a>

              </div>
            </li>
          </ul>
          <form class="form-inline my-2 my-md-0">
            <input class="form-control" type="text" placeholder="Search">
          </form>
        </div>
      </nav>
      <!-- fin navbar -->
    <div class="jumbotron">
        <h1 id="titreNiveau1" class="display-4">JS - VIII 04 - Formulaire</h1>
        <p class="lead"></p>
    </div>
    <!-- fin jumbotron -->
    <div class="container border border-primary p-4">
        <div class="row border border-danger m-2 p-2">
            <div class="col-6">
                <h2>Fonction controleForm()</h2>
            </div><!-- fin col -->

            <div class="col-6">
                <form action="formulaire" method="GET" name="formulaire" class="form-inline">

                   <div class="form-group m-1">
                        <label for="pseudo" class="sr-only">Pseudonyme</label>
                        <input type="text" name="pseudo" id="pseudo" placeholder="Votre pseudo" class="form-control">
                   </div>

                    <div class="form-group m-1">
                        <label for="mdp" class="sr-only">Mot e passe</label>
                        <input type="password" name="mdp" id="mdp" placeholder="Votre mot de passe" class="form-control">
                    </div>

                    <button type="submit" id="submit" value="ok" class="btn btn-primary" onclick="controleForm()">Envoyer</button>
                </form>
                
            </div><!-- fin col -->
        </div>
        <!-- fin row || CONTROLFORM -->

        <div class="row m-1 my-4">
            <div class="col-4">
                <h2>Nouvelle fonction inscriptionForm2()</h2>
            </div><!-- fin col 1 -->

            <div class="col-8 border border-success">
                <form action="inscription" method="Get" name="inscription" id="form_inscription">
                    <div class="form-group m-1">
                        <label for="prenom">Prénom *</label>
                        <input type="text" name="prenom" id="prenom" class="form-control" placeholder="Votre prénom" required>
                    </div>

                   <div class="form-group m-1">
                        <label for="nom">Nom *</label>
                        <input type="text" name="nom" id="nom" class="form-control" placeholder="Votre nom" required>
                   </div>

                   <div class="form-group m-1">
                       <label for="email">Email *</label>
                       <input type="email" name="email" id="email" class="form-control" placeholder="Votre email" required>
                   </div>

                   <div class="form-group m-1">
                        <label for="mdp_2">Choisissez un mot de passe *</label>
                        <input type="password" name="mdp_2" id="mdp_2" class="form-control" placeholder="Votre mot de passe" required>
                   </div>

                   <div class="from-group m-1">
                       <label for="confmdp">Retapez votre mot de passe *</label>
                       <input type="password" name="confmdp" id="confmdp" class="form-control" placeholder="Confirmez">
                   </div>

                   <div class="input-group mb-3">
                    <div class="input-group-prepend">
                      <label class="input-group-text" for="inputGroupSelect01">Options</label>
                    </div>
                    <select class="custom-select" id="inputGroupSelect01">
                      <option selected>Choose...</option>
                      <option value="1">Mâle</option>
                      <option value="2">Femelle</option>
                      <option value="3">Autre</option>
                    </select>
                  </div>

                   <button type="submit" id="submit_2" value="inscription" class="btn btn-primary m-1">S'inscrire</button>

                   <button type="reset" id="reset_form" class="btn btn-warning m-1">Effacer</button>

                </form>
            </div><!-- fin col 2 -->
        </div><!-- fin row -->
      
    </div><!-- fin container -->

    <!-- Bootstrap scripts -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>

    <!-- Mes scripts -->
    <script>
        //controle du formulaire 1 avec une fonction

        function controleForm() {
            //event veut dire événement :
            event.preventDefault();// pour empêcher l'envoi du formulaire, à enlever quand le site est ouvert !
            //dans le document dans 
            if(document.formulaire.pseudo.value.length < 5 || document.formulaire.pseudo.value.length > 15) {
                console.log(document.formulaire.pseudo.value);
                alert('Le pseudo est comporter entre 5 et 15 caractères');
            }

            if(document.formulaire.mdp.value.length < 3 || document.formulaire.mdp.value.length > 12) {
                console.log(document.formulaire.mdp.value);
                alert('Le Mot de passe est comporter entre 3 et 13 caractères');
            }
        }


     /////////////////////////////////////////////////////////
        //controle du formulaire d'inscription avec la fonction

        //récuperation du formulaire par son id

        let formInscrip = document.getElementById('form_inscription');
        // console.log(btn);
        //écoute de l'envoie du formulaire
        formInscrip.addEventListener('submit', inscriptionForm);

        //fonction pour traiter le formulaire
        function inscriptionForm(event) {
            //permet de ne pas envoyer le formulaire, pour ne pas 
            event.preventDefault(); //on trouve e parfois pour appeler event
            // console.log(event.target.prenom);

            //https://regex101.com/
            //expression reguliere pour valider les emails
            // let regex = /([a-z0-9](\.?|\_|\-))*@([a-z0-9]{2,})(\.[a-z]{2,}){1,}/;
            let regex = new RegExp('([a-z0-9](\.?|\_|\-))*@([a-z0-9]{2,})(\.[a-z]{2,}){1,}');

            //récuperation des contenu des champs
            let prenom  = event.target.prenom.value,
                nom     = event.target.nom.value,
                email   = event.target.email.value,
                mdp_2   = event.target.mdp_2.value,
                confmdp = event.target.confmdp.value;

            // console.log(prenom, nom, email, mdp_2, confmdp);

            //prenom et nom ne sont pas vide
            if(prenom !== "" || nom !== "") {
                if(prenom.length < 2) {
                    //classList repésente toute les classes de l'élément event.target.prenom.classList
                    //add ajoute une class à l'élément
                    event.target.prenom.classList.add('error');
                    event.target.prenom.classList.remove('valide');
 
                } else {
                    event.target.prenom.classList.add('valide');
                    event.target.prenom.classList.remove('error');

                }

                if(nom.length < 4) {
                    event.target.nom.classList.add('error');
                    event.target.nom.classList.remove('valide');

                } else {
                    event.target.nom.classList.add('valide');
                    event.target.nom.classList.remove('error');
                    //sinon on "valide"
                }
            }//fin condition prenom / nom

            if(confmdp !== mdp_2) {
                event.target.mdp_2.classList.add('error');
                event.target.mdp_2.classList.remove('valide');
                
                event.target.confmdp.classList.add('error');
                event.target.confmdp.classList.remove('valide');

            } else if(mdp_2.length < 5 || mdp_2.length > 12) {
                event.target.mdp_2.classList.add('error');
                event.target.mdp_2.classList.remove('valide');

                event.target.confmdp.classList.add('error');
                event.target.confmdp.classList.remove('valide');
            } else {
                event.target.mdp_2.classList.add('valide');
                event.target.mdp_2.classList.remove('error');

                event.target.confmdp.classList.add('valide');
                event.target.confmdp.classList.remove('error');

                // console.log(regex.test(email));
                if(regex.test(email) === false) {
                    // if(regex.test(email))
                    event.target.email.classList.add('error');
                    event.target.email.classList.remove('valide');
                } else {
                    event.target.email.classList.remove('error');
                    event.target.email.classList.add('valide')

                }

            }
        }//fin fonction

        document.getElementById('reset_form').addEventListener('click', function(event) {
            // console.log(event.target.form);
            event.target.form.prenom.value = "";
            event.target.form.nom.value = "";
            event.target.form.email.value = "";
            event.target.form.mdp_2.value = "";
            event.target.form.confmdp.value = "";
        });
    </script>
    
</body>
</html>